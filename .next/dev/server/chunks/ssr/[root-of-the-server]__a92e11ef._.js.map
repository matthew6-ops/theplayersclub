{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/GameCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype GameCardProps = {\n  game: any;\n};\n\n// Convert decimal odds → American (+150 / -120 etc.)\nfunction decimalToAmerican(decimal: number | null | undefined): string {\n  if (!decimal || decimal <= 1) return \"-\";\n\n  if (decimal >= 2) {\n    return `+${Math.round((decimal - 1) * 100)}`;\n  } else {\n    return `${Math.round(-100 / (decimal - 1))}`;\n  }\n}\n\n// Best price per team across all books\nfunction getBestPrices(bookmakers: any[]): Record<string, number> {\n  const best: Record<string, number> = {};\n\n  bookmakers?.forEach((bm) => {\n    bm.markets?.forEach((m: any) => {\n      if (m.key !== \"h2h\") return;\n\n      m.outcomes?.forEach((o: any) => {\n        if (!best[o.name] || o.price > best[o.name]) {\n          best[o.name] = o.price;\n        }\n      });\n    });\n  });\n\n  return best;\n}\n\nfunction findH2HPrices(bookmaker: any, teams: string[]) {\n  const market = bookmaker.markets?.find((m: any) => m.key === \"h2h\");\n  const out: Record<string, number | null> = {};\n  teams.forEach((t) => {\n    const o = market?.outcomes?.find((o: any) => o.name === t);\n    out[t] = o?.price ?? null;\n  });\n  return out;\n}\n\nexport default function GameCard({ game }: GameCardProps) {\n  const [expanded, setExpanded] = useState(false);\n  const [bankroll, setBankroll] = useState<number>(100);\n\n  const home = game.home_team;\n  const away = game.away_team;\n\n  const commence = game.commence_time ? new Date(game.commence_time) : null;\n  const now = new Date();\n  const isLive = Array.isArray(game.scores) && game.scores.length > 0;\n  const hasStarted = commence && commence < now;\n\n  const bestPrices = useMemo(\n    () => getBestPrices(game.bookmakers ?? []),\n    [game.bookmakers]\n  );\n\n  const homeBest = bestPrices[home];\n  const awayBest = bestPrices[away];\n\n  // Expected value & arb info – adjust to your backend shape\n  const evEdgePct: number = game.bestEv?.edge ?? 0; // e.g. 3.4 = +3.4%\n  const arbRoi: number = game.bestArb?.roi ?? 0; // e.g. 0.032 = 3.2%\n\n  const effectiveEdgePct =\n    evEdgePct || (arbRoi ? arbRoi * 100 : 0);\n\n  // Dumb but practical staking rules:\n  // positive edge → 2% of bankroll, otherwise 1%\n  const recommendedStake = bankroll * (effectiveEdgePct > 0 ? 0.02 : 0.01);\n  const expectedProfit = (recommendedStake * effectiveEdgePct) / 100;\n\n  return (\n    <div className=\"rounded-2xl border border-slate-800 bg-slate-950/70 p-4 shadow-lg shadow-emerald-500/5 transition hover:border-emerald-500/60 hover:shadow-emerald-500/20\">\n      {/* Arb banner */}\n      {arbRoi > 0 && (\n        <div className=\"mb-3 rounded-xl bg-gradient-to-r from-emerald-500/20 via-cyan-500/10 to-transparent px-3 py-1 text-xs font-medium text-emerald-300\">\n          Arbitrage detected · ROI {(arbRoi * 100).toFixed(2)}%\n        </div>\n      )}\n\n      {/* Header: matchup & status */}\n      <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <div className=\"text-xs uppercase tracking-wide text-slate-400\">\n            {game.sport_title ?? game.sport_key}\n          </div>\n          <div className=\"mt-1 text-lg font-semibold text-slate-50\">\n            {away} @ {home}\n          </div>\n\n          <div className=\"mt-1 flex flex-wrap items-center gap-2 text-xs text-slate-400\">\n            {commence && (\n              <span>\n                {commence.toLocaleDateString(undefined, {\n                  month: \"short\",\n                  day: \"numeric\",\n                })}{\" \"}\n                ·{\" \"}\n                {commence.toLocaleTimeString(undefined, {\n                  hour: \"numeric\",\n                  minute: \"2-digit\",\n                })}\n              </span>\n            )}\n\n            {isLive && (\n              <span className=\"rounded-full bg-red-500/10 px-2 py-0.5 text-[11px] font-semibold text-red-400\">\n                Live\n              </span>\n            )}\n\n            {!isLive && hasStarted && (\n              <span className=\"rounded-full bg-orange-500/10 px-2 py-0.5 text-[11px] font-semibold text-orange-400\">\n                In progress\n              </span>\n            )}\n\n            {game.bookmakers?.[0]?.last_update && (\n              <span className=\"text-[11px] text-slate-500\">\n                Book data:{\" \"}\n                {new Date(\n                  game.bookmakers[0].last_update\n                ).toLocaleTimeString(undefined, {\n                  hour: \"numeric\",\n                  minute: \"2-digit\",\n                  second: \"2-digit\",\n                })}\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* Score block */}\n        {(isLive || hasStarted) && (\n          <div className=\"mt-2 flex flex-row items-center gap-3 rounded-xl bg-slate-900/70 px-3 py-2 text-sm sm:mt-0\">\n            {game.scores?.map((s: any) => (\n              <div key={s.name} className=\"flex flex-col items-center\">\n                <span className=\"text-[11px] uppercase tracking-wide text-slate-400\">\n                  {s.name}\n                </span>\n                <span className=\"text-lg font-semibold text-slate-50\">\n                  {s.score}\n                </span>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Best lines strip */}\n      <div className=\"mt-3 grid grid-cols-2 gap-3 text-xs sm:text-sm\">\n        <div className=\"rounded-xl bg-slate-900/80 p-3\">\n          <div className=\"text-[11px] uppercase tracking-wide text-slate-400\">\n            Best line · {away}\n          </div>\n          <div className=\"mt-1 flex items-end gap-2\">\n            <span className=\"text-base font-semibold text-slate-50\">\n              {decimalToAmerican(awayBest)}\n            </span>\n            <span className=\"text-[11px] text-slate-500\">\n              {awayBest ? awayBest.toFixed(2) : \"-\"}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"rounded-xl bg-slate-900/80 p-3\">\n          <div className=\"text-[11px] uppercase tracking-wide text-slate-400\">\n            Best line · {home}\n          </div>\n          <div className=\"mt-1 flex items-end gap-2\">\n            <span className=\"text-base font-semibold text-slate-50\">\n              {decimalToAmerican(homeBest)}\n            </span>\n            <span className=\"text-[11px] text-slate-500\">\n              {homeBest ? homeBest.toFixed(2) : \"-\"}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* EV strip */}\n      <div className=\"mt-3 flex flex-wrap items-center gap-3 text-xs\">\n        {effectiveEdgePct !== 0 && (\n          <span\n            className={`rounded-full px-3 py-1 font-medium ${\n              effectiveEdgePct > 0\n                ? \"bg-emerald-500/10 text-emerald-300\"\n                : \"bg-red-500/10 text-red-300\"\n            }`}\n          >\n            Edge {effectiveEdgePct > 0 ? \"+\" : \"\"}\n            {effectiveEdgePct.toFixed(2)}%\n          </span>\n        )}\n\n        {game.market_type && (\n          <span className=\"rounded-full bg-slate-900/90 px-3 py-1 text-slate-400\">\n            {game.market_type}\n          </span>\n        )}\n\n        {game.label && (\n          <span className=\"rounded-full bg-slate-900/90 px-3 py-1 text-slate-300\">\n            {game.label}\n          </span>\n        )}\n      </div>\n\n      {/* Expand toggle */}\n      <button\n        type=\"button\"\n        onClick={() => setExpanded((x) => !x)}\n        className=\"mt-4 flex w-full items-center justify-between rounded-xl bg-slate-900/80 px-3 py-2 text-xs font-medium text-slate-200 hover:bg-slate-900\"\n      >\n        <span>View books, lines & bet sizing</span>\n        <span className=\"text-[11px] text-slate-500\">\n          {expanded ? \"Hide\" : \"Expand\"}\n        </span>\n      </button>\n\n      {/* Expanded content: odds table + bankroll sim */}\n      {expanded && (\n        <div className=\"mt-4 space-y-4 border-t border-slate-800 pt-4\">\n          {/* Odds table */}\n          <div className=\"max-h-64 overflow-y-auto pr-1\">\n            <table className=\"w-full text-xs\">\n              <thead className=\"sticky top-0 bg-slate-950/95\">\n                <tr className=\"text-[11px] text-slate-400\">\n                  <th className=\"px-2 py-1 text-left font-medium\">Book</th>\n                  <th className=\"px-2 py-1 text-right font-medium\">\n                    {away} (US / Dec)\n                  </th>\n                  <th className=\"px-2 py-1 text-right font-medium\">\n                    {home} (US / Dec)\n                  </th>\n                  <th className=\"px-2 py-1 text-right font-medium\">\n                    Last update\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {game.bookmakers?.map((bm: any) => {\n                  const prices = findH2HPrices(bm, [away, home]);\n                  return (\n                    <tr\n                      key={bm.key}\n                      className=\"border-t border-slate-900/60 text-slate-200\"\n                    >\n                      <td className=\"px-2 py-1 text-left text-[11px] sm:text-xs\">\n                        {bm.title ?? bm.key}\n                      </td>\n                      <td className=\"px-2 py-1 text-right\">\n                        {prices[away] ? (\n                          <div className=\"flex flex-col items-end\">\n                            <span className=\"font-medium\">\n                              {decimalToAmerican(prices[away])}\n                            </span>\n                            <span className=\"text-[11px] text-slate-500\">\n                              {prices[away]?.toFixed(3)}\n                            </span>\n                          </div>\n                        ) : (\n                          <span className=\"text-slate-600\">-</span>\n                        )}\n                      </td>\n                      <td className=\"px-2 py-1 text-right\">\n                        {prices[home] ? (\n                          <div className=\"flex flex-col items-end\">\n                            <span className=\"font-medium\">\n                              {decimalToAmerican(prices[home])}\n                            </span>\n                            <span className=\"text-[11px] text-slate-500\">\n                              {prices[home]?.toFixed(3)}\n                            </span>\n                          </div>\n                        ) : (\n                          <span className=\"text-slate-600\">-</span>\n                        )}\n                      </td>\n                      <td className=\"px-2 py-1 text-right text-[11px] text-slate-500\">\n                        {bm.last_update\n                          ? new Date(bm.last_update).toLocaleTimeString(\n                              undefined,\n                              {\n                                hour: \"numeric\",\n                                minute: \"2-digit\",\n                              }\n                            )\n                          : \"-\"}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Bankroll / bet simulator */}\n          <div className=\"rounded-xl bg-slate-900/80 p-3\">\n            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n              <div>\n                <div className=\"text-xs font-medium text-slate-200\">\n                  Bankroll simulator\n                </div>\n                <div className=\"text-[11px] text-slate-500\">\n                  Simple stake sizing from edge / ROI\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-[11px] text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  min={0}\n                  value={bankroll}\n                  onChange={(e) =>\n                    setBankroll(Number(e.target.value) || 0)\n                  }\n                  className=\"w-24 rounded-lg border border-slate-700 bg-slate-950/70 px-2 py-1 text-right text-xs text-slate-100 outline-none focus:border-emerald-500\"\n                />\n                <span className=\"text-[11px] text-slate-500\">\n                  bankroll\n                </span>\n              </div>\n            </div>\n\n            <div className=\"mt-3 grid grid-cols-2 gap-3 text-xs\">\n              <div className=\"rounded-lg bg-slate-950/80 px-3 py-2\">\n                <div className=\"text-[11px] uppercase tracking-wide text-slate-400\">\n                  Recommended stake\n                </div>\n                <div className=\"mt-1 text-sm font-semibold text-emerald-300\">\n                  ${recommendedStake.toFixed(2)}\n                </div>\n              </div>\n\n              <div className=\"rounded-lg bg-slate-950/80 px-3 py-2\">\n                <div className=\"text-[11px] uppercase tracking-wide text-slate-400\">\n                  Expected profit\n                </div>\n                <div\n                  className={`mt-1 text-sm font-semibold ${\n                    expectedProfit >= 0\n                      ? \"text-emerald-300\"\n                      : \"text-red-300\"\n                  }`}\n                >\n                  ${expectedProfit.toFixed(2)}\n                </div>\n              </div>\n            </div>\n\n            {arbRoi > 0 && (\n              <div className=\"mt-2 text-[11px] text-slate-500\">\n                For pure arb, you can replace this with precise split\n                stakes from your backend once you wire those fields in.\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 740, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/OpportunitiesView.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport GameCard from \"./GameCard\";\n\ntype OpportunitiesViewProps = {\n  initialResults: any[];\n};\n\nexport default function OpportunitiesView({\n  initialResults,\n}: OpportunitiesViewProps) {\n  const [results, setResults] = useState<any[]>(initialResults ?? []);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(\n    initialResults?.length ? new Date() : null\n  );\n  const [secondsToRefresh, setSecondsToRefresh] = useState(15);\n  const [activeSport, setActiveSport] = useState<string>(\"all\");\n\n  const API_URL =\n    process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:8000\";\n\n  // Auto-refresh & countdown\n  useEffect(() => {\n    let isCancelled = false;\n\n    const fetchData = async () => {\n      try {\n        const res = await fetch(`${API_URL}/opportunities`);\n        if (!res.ok) return;\n\n        const json = await res.json();\n        if (!isCancelled) {\n          setResults(json);\n          setLastUpdated(new Date());\n        }\n      } catch {\n        // silently eat errors, user can still see last good data\n      }\n    };\n\n    // Initial refresh on mount\n    fetchData();\n\n    const refreshInterval = setInterval(() => {\n      fetchData();\n      setSecondsToRefresh(15);\n    }, 15000);\n\n    const countdownInterval = setInterval(() => {\n      setSecondsToRefresh((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(refreshInterval);\n      clearInterval(countdownInterval);\n    };\n  }, [API_URL]);\n\n  // Collect sports for tabs\n  const sports = useMemo(() => {\n    const set = new Map<string, string>();\n    results?.forEach((g: any) => {\n      const key = g.sport_key ?? \"unknown\";\n      const title = g.sport_title ?? key;\n      if (!set.has(key)) set.set(key, title);\n    });\n    return Array.from(set.entries()).map(([key, label]) => ({\n      key,\n      label,\n    }));\n  }, [results]);\n\n  const filteredGames = useMemo(() => {\n    if (activeSport === \"all\") return results ?? [];\n    return (results ?? []).filter(\n      (g: any) => g.sport_key === activeSport\n    );\n  }, [results, activeSport]);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header bar */}\n      <div className=\"flex flex-col gap-4 border-b border-slate-800 pb-4 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <div className=\"text-xs font-semibold uppercase tracking-[0.16em] text-emerald-400\">\n            SharpEdge\n          </div>\n          <h1 className=\"mt-1 text-xl font-semibold text-slate-50 sm:text-2xl\">\n            Live arbitrage & EV opportunities\n          </h1>\n          <p className=\"mt-1 text-xs text-slate-400 sm:text-sm\">\n            Dark crypto-style board. Best lines, edge, and sizing in\n            one place.\n          </p>\n        </div>\n\n        <div className=\"flex flex-col items-start gap-1 text-xs text-slate-400 sm:items-end\">\n          {lastUpdated && (\n            <span>\n              Updated{\" \"}\n              {lastUpdated.toLocaleTimeString(undefined, {\n                hour: \"numeric\",\n                minute: \"2-digit\",\n                second: \"2-digit\",\n              })}\n            </span>\n          )}\n          <span className=\"text-[11px] text-slate-500\">\n            Auto refresh in {secondsToRefresh}s\n          </span>\n        </div>\n      </div>\n\n      {/* Sport tabs */}\n      <div className=\"sticky top-0 z-10 -mx-4 mb-2 bg-slate-950/95 px-4 pt-2 backdrop-blur sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8\">\n        <div className=\"flex gap-2 overflow-x-auto pb-2 text-xs\">\n          <button\n            type=\"button\"\n            onClick={() => setActiveSport(\"all\")}\n            className={`rounded-full px-3 py-1.5 transition ${\n              activeSport === \"all\"\n                ? \"bg-emerald-500 text-slate-950\"\n                : \"bg-slate-900/90 text-slate-300 hover:bg-slate-800\"\n            }`}\n          >\n            All\n          </button>\n          {sports.map((s) => (\n            <button\n              key={s.key}\n              type=\"button\"\n              onClick={() => setActiveSport(s.key)}\n              className={`whitespace-nowrap rounded-full px-3 py-1.5 transition ${\n                activeSport === s.key\n                  ? \"bg-emerald-500 text-slate-950\"\n                  : \"bg-slate-900/90 text-slate-300 hover:bg-slate-800\"\n              }`}\n            >\n              {s.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      {filteredGames.length === 0 ? (\n        <div className=\"mt-6 rounded-2xl border border-dashed border-slate-800 bg-slate-950/80 p-6 text-center text-sm text-slate-400\">\n          No opportunities at the moment. Either the books are sharp or\n          your scraper is asleep.\n        </div>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          {filteredGames.map((game: any) => (\n            <GameCard key={game.id ?? `${game.sport_key}-${game.home_team}-${game.away_team}-${game.commence_time}`} game={game} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 960, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 984, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}