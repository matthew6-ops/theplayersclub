{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/OpportunitiesView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/OpportunitiesView.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/OpportunitiesView.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/OpportunitiesView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/OpportunitiesView.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/OpportunitiesView.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/lib/arbitrage.ts"],"sourcesContent":["export function detectArbitrageWithStakes(best: Record<string, number>) {\n  const teams = Object.keys(best);\n  if (teams.length !== 2) return null;\n\n  const [t1, t2] = teams;\n  const o1 = best[t1];\n  const o2 = best[t2];\n\n  const imp1 = 1 / o1;\n  const imp2 = 1 / o2;\n\n  const sumImp = imp1 + imp2;\n\n  if (sumImp >= 1) return { exists: false };\n\n  const profitPercent = (1 - sumImp) * 100;\n\n  return {\n    exists: true,\n    profitPercent,\n    teams: [t1, t2]\n  };\n}\n\nconst DEFAULT_SPORTS = [\n  \"basketball_nba\",\n  \"americanfootball_nfl\",\n  \"icehockey_nhl\"\n];\n\nasync function fetchOddsForSport(apiKey: string, sportKey: string) {\n  const url = `https://api.the-odds-api.com/v4/sports/${sportKey}/odds?apiKey=${apiKey}&regions=us&markets=h2h&oddsFormat=decimal`;\n\n  const res = await fetch(url, {\n    next: { revalidate: 10 }\n  });\n\n  if (!res.ok) {\n    console.error(\"Error fetching odds:\", sportKey, res.status);\n    return [];\n  }\n\n  return res.json();\n}\n\nexport default async function getOpportunities() {\n  const API_KEY = process.env.ODDS_API_KEY;\n  if (!API_KEY) {\n    console.error(\"Missing ODDS_API_KEY\");\n    return [];\n  }\n\n  const configuredSports = process.env.ODDS_SPORTS?.split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean);\n  const sportKeys = configuredSports?.length ? configuredSports : DEFAULT_SPORTS;\n\n  const resultsBySport = await Promise.all(\n    sportKeys.map((sport) => fetchOddsForSport(API_KEY, sport))\n  );\n\n  const games = resultsBySport\n    .flat()\n    .filter(Boolean)\n    .map((game: any) => {\n    const bookmakers = game.bookmakers ?? [];\n\n    const best: Record<string, number> = {};\n\n    bookmakers.forEach((bm: any) => {\n      bm.markets?.forEach((m: any) => {\n        if (m.key !== \"h2h\") return;\n\n        m.outcomes?.forEach((o: any) => {\n          if (!best[o.name] || o.price > best[o.name]) {\n            best[o.name] = o.price;\n          }\n        });\n      });\n    });\n\n    const arb = detectArbitrageWithStakes(best);\n\n    return {\n      id: game.id,\n      sport_key: game.sport_key,\n      sport_title: game.sport_title,\n      home_team: game.home_team,\n      away_team: game.away_team,\n      commence_time: game.commence_time,\n      bookmakers,\n      best,\n      arb\n    };\n  });\n\n  return games;\n}\n\nexport { getOpportunities };\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,0BAA0B,IAA4B;IACpE,MAAM,QAAQ,OAAO,IAAI,CAAC;IAC1B,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;IAE/B,MAAM,CAAC,IAAI,GAAG,GAAG;IACjB,MAAM,KAAK,IAAI,CAAC,GAAG;IACnB,MAAM,KAAK,IAAI,CAAC,GAAG;IAEnB,MAAM,OAAO,IAAI;IACjB,MAAM,OAAO,IAAI;IAEjB,MAAM,SAAS,OAAO;IAEtB,IAAI,UAAU,GAAG,OAAO;QAAE,QAAQ;IAAM;IAExC,MAAM,gBAAgB,CAAC,IAAI,MAAM,IAAI;IAErC,OAAO;QACL,QAAQ;QACR;QACA,OAAO;YAAC;YAAI;SAAG;IACjB;AACF;AAEA,MAAM,iBAAiB;IACrB;IACA;IACA;CACD;AAED,eAAe,kBAAkB,MAAc,EAAE,QAAgB;IAC/D,MAAM,MAAM,CAAC,uCAAuC,EAAE,SAAS,aAAa,EAAE,OAAO,0CAA0C,CAAC;IAEhI,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,MAAM;YAAE,YAAY;QAAG;IACzB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,QAAQ,KAAK,CAAC,wBAAwB,UAAU,IAAI,MAAM;QAC1D,OAAO,EAAE;IACX;IAEA,OAAO,IAAI,IAAI;AACjB;AAEe,eAAe;IAC5B,MAAM,UAAU,QAAQ,GAAG,CAAC,YAAY;IACxC,IAAI,CAAC,SAAS;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,EAAE;IACX;IAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,WAAW,EAAE,MAAM,KACrD,IAAI,CAAC,IAAM,EAAE,IAAI,IACjB,OAAO;IACV,MAAM,YAAY,kBAAkB,SAAS,mBAAmB;IAEhE,MAAM,iBAAiB,MAAM,QAAQ,GAAG,CACtC,UAAU,GAAG,CAAC,CAAC,QAAU,kBAAkB,SAAS;IAGtD,MAAM,QAAQ,eACX,IAAI,GACJ,MAAM,CAAC,SACP,GAAG,CAAC,CAAC;QACN,MAAM,aAAa,KAAK,UAAU,IAAI,EAAE;QAExC,MAAM,OAA+B,CAAC;QAEtC,WAAW,OAAO,CAAC,CAAC;YAClB,GAAG,OAAO,EAAE,QAAQ,CAAC;gBACnB,IAAI,EAAE,GAAG,KAAK,OAAO;gBAErB,EAAE,QAAQ,EAAE,QAAQ,CAAC;oBACnB,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE;wBAC3C,IAAI,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,KAAK;oBACxB;gBACF;YACF;QACF;QAEA,MAAM,MAAM,0BAA0B;QAEtC,OAAO;YACL,IAAI,KAAK,EAAE;YACX,WAAW,KAAK,SAAS;YACzB,aAAa,KAAK,WAAW;YAC7B,WAAW,KAAK,SAAS;YACzB,WAAW,KAAK,SAAS;YACzB,eAAe,KAAK,aAAa;YACjC;YACA;YACA;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/odds/page.tsx"],"sourcesContent":["import OpportunitiesView from \"@/app/components/OpportunitiesView\";\nimport { getOpportunities } from \"@/lib/arbitrage\";\n\nexport const revalidate = 0;\n\nexport default async function OddsPage() {\n  let results: any[] = [];\n\n  try {\n    results = await getOpportunities();\n  } catch (err) {\n    console.error(\"Failed to load opportunities server-side\", err);\n  }\n\n  return (\n    <div className=\"odds-shell\">\n      <main>\n        <OpportunitiesView initialResults={results} />\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEO,MAAM,aAAa;AAEX,eAAe;IAC5B,IAAI,UAAiB,EAAE;IAEvB,IAAI;QACF,UAAU,MAAM,IAAA,oIAAgB;IAClC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,4CAA4C;IAC5D;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;sBACC,cAAA,8OAAC,kJAAiB;gBAAC,gBAAgB;;;;;;;;;;;;;;;;AAI3C"}}]
}