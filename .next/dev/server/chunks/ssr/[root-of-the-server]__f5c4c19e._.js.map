{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/OpportunitiesView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/OpportunitiesView.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/OpportunitiesView.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/components/OpportunitiesView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/OpportunitiesView.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/OpportunitiesView.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/lib/arbitrage.ts"],"sourcesContent":["export function detectArbitrageWithStakes(best: Record<string, number>) {\n  const teams = Object.keys(best);\n  if (teams.length !== 2) return null;\n\n  const [t1, t2] = teams;\n  const o1 = best[t1];\n  const o2 = best[t2];\n\n  const imp1 = 1 / o1;\n  const imp2 = 1 / o2;\n\n  const sumImp = imp1 + imp2;\n\n  if (sumImp >= 1) return { exists: false };\n\n  const profitPercent = (1 - sumImp) * 100;\n\n  return {\n    exists: true,\n    profitPercent,\n    teams: [t1, t2]\n  };\n}\n\nconst DEFAULT_SPORTS = [\n  \"basketball_nba\",\n  \"americanfootball_nfl\",\n  \"icehockey_nhl\"\n];\n\nasync function fetchOddsForSport(apiKey: string, sportKey: string) {\n  const url = new URL(`https://api.the-odds-api.com/v4/sports/${sportKey}/odds`);\n  url.searchParams.set(\"apiKey\", apiKey);\n  url.searchParams.set(\"regions\", \"us\");\n  // Request multiple markets so the UI can show\n  // moneyline, spreads, and totals in separate tabs.\n  url.searchParams.set(\"markets\", \"h2h,spreads,totals\");\n  url.searchParams.set(\"oddsFormat\", \"decimal\");\n\n  const res = await fetch(url.toString(), {\n    next: { revalidate: 10 }\n  });\n\n  if (!res.ok) {\n    console.error(\"Error fetching odds:\", sportKey, res.status);\n    return [];\n  }\n\n  return res.json();\n}\n\nasync function fetchScoresForSport(apiKey: string, sportKey: string) {\n  const url = new URL(`https://api.the-odds-api.com/v4/sports/${sportKey}/scores`);\n  url.searchParams.set(\"apiKey\", apiKey);\n  url.searchParams.set(\"daysFrom\", \"2\");\n\n  const res = await fetch(url.toString(), {\n    next: { revalidate: 30 }\n  });\n\n  if (!res.ok) {\n    console.error(\"Error fetching scores:\", sportKey, res.status);\n    return [];\n  }\n\n  return res.json();\n}\n\nexport async function getOpportunities() {\n  const API_KEY = process.env.ODDS_API_KEY;\n  if (!API_KEY) {\n    console.error(\"Missing ODDS_API_KEY\");\n    return [];\n  }\n\n  const configuredSports = process.env.ODDS_SPORTS?.split(\",\")\n    .map((s) => s.trim())\n    .filter(Boolean);\n  const sportKeys = configuredSports?.length ? configuredSports : DEFAULT_SPORTS;\n\n  const bundles = await Promise.all(\n    sportKeys.map(async (sport) => {\n      const [odds, scores] = await Promise.all([\n        fetchOddsForSport(API_KEY, sport),\n        fetchScoresForSport(API_KEY, sport)\n      ]);\n      return { odds, scores };\n    })\n  );\n\n  const now = Date.now();\n\n  const games = bundles\n    .flatMap(({ odds, scores }) => {\n      const scoreMap = new Map<string, any>();\n      scores?.forEach((score: any) => {\n        if (score?.id) {\n          scoreMap.set(score.id, score);\n        }\n      });\n\n      return (odds ?? []).map((game: any) => {\n        const bookmakers = game.bookmakers ?? [];\n\n        const best: Record<string, number> = {};\n\n        bookmakers.forEach((bm: any) => {\n          bm.markets?.forEach((m: any) => {\n            if (m.key !== \"h2h\") return;\n\n            m.outcomes?.forEach((o: any) => {\n              if (!best[o.name] || o.price > best[o.name]) {\n                best[o.name] = o.price;\n              }\n            });\n          });\n        });\n\n        const arb = detectArbitrageWithStakes(best);\n        const scoreboard = scoreMap.get(game.id);\n\n        return {\n          id: game.id,\n          sport_key: game.sport_key,\n          sport_title: game.sport_title,\n          home_team: game.home_team,\n          away_team: game.away_team,\n          commence_time: game.commence_time,\n          bookmakers,\n          best,\n          arb,\n          scoreboard\n        };\n      });\n    })\n    .filter(Boolean)\n    .filter((game: any) => {\n      const scoreboard = game?.scoreboard;\n      if (scoreboard?.completed) return false;\n      const status = scoreboard?.status ? String(scoreboard.status).toLowerCase() : null;\n      if (status && status.includes(\"final\")) return false;\n      return true;\n    });\n\n  return games;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthelfer/Documents/theplayersclub/app/odds/page.tsx"],"sourcesContent":["import OpportunitiesView from \"@/app/components/OpportunitiesView\";\nimport { getOpportunities } from \"@/lib/arbitrage\";\nimport { GameOpportunity } from \"@/lib/types\";\n\nexport const revalidate = 0;\n\nexport default async function OddsPage() {\n  let opportunities: GameOpportunity[] = [];\n\n  try {\n    opportunities = await getOpportunities();\n  } catch (err) {\n    console.error(\"Unable to load opportunities\", err);\n  }\n\n  return (\n    <main className=\"min-h-screen w-full bg-[#0b0f19] text-white\">\n      <div className=\"relative pt-10 pb-20\">\n        <div className=\"pointer-events-none absolute inset-0 blur-[200px] opacity-60\">\n          <div className=\"absolute top-0 left-1/4 h-72 w-72 rounded-full bg-[#22d3ee]/30\" />\n          <div className=\"absolute bottom-10 right-0 h-80 w-80 rounded-full bg-[#facc15]/25\" />\n        </div>\n        <div className=\"relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-10\">\n          <OpportunitiesView initialResults={opportunities} />\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAGO,MAAM,aAAa;AAEX,eAAe;IAC5B,IAAI,gBAAmC,EAAE;IAEzC,IAAI;QACF,gBAAgB,MAAM,IAAA,oIAAgB;IACxC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,gCAAgC;IAChD;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;;;;;;;8BAEjB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,kJAAiB;wBAAC,gBAAgB;;;;;;;;;;;;;;;;;;;;;;AAK7C"}}]
}